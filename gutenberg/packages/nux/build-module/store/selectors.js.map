{"version":3,"sources":["@wordpress/nux/src/store/selectors.js"],"names":["createSelector","includes","difference","keys","has","getAssociatedGuide","state","tipId","guides","tipIds","nonDismissedTips","preferences","dismissedTips","currentTipId","nextTipId","isTipVisible","areTipsEnabled","associatedGuide"],"mappings":";;;;;;;;AAAA;;;AAGA,OAAOA,cAAP,MAA2B,QAA3B;AACA,SAASC,QAAT,EAAmBC,UAAnB,EAA+BC,IAA/B,EAAqCC,GAArC,QAAgD,QAAhD;AAEA;;;;;;;;;AASA;;;;;;;;;;AASA,OAAO,IAAMC,kBAAkB,GAAGL,cAAc,CAC/C,UAAEM,KAAF,EAASC,KAAT,EAAoB;AAAA,6CACGD,KAAK,CAACE,MADT;AAAA;;AAAA;AACnB,wDAAqC;AAAA,UAAzBC,MAAyB;;AACpC,UAAKR,QAAQ,CAAEQ,MAAF,EAAUF,KAAV,CAAb,EAAiC;AAChC,YAAMG,gBAAgB,GAAGR,UAAU,CAClCO,MADkC,EAElCN,IAAI,CAAEG,KAAK,CAACK,WAAN,CAAkBC,aAApB,CAF8B,CAAnC;;AADgC,+CAQ5BF,gBAR4B;AAAA;AAAA,YAM/BG,YAN+B,mCAMhB,IANgB;AAAA;AAAA,YAO/BC,SAP+B,oCAOnB,IAPmB;;AAShC,eAAO;AAAEL,UAAAA,MAAM,EAANA,MAAF;AAAUI,UAAAA,YAAY,EAAZA,YAAV;AAAwBC,UAAAA,SAAS,EAATA;AAAxB,SAAP;AACA;AACD;AAbkB;AAAA;AAAA;AAAA;AAAA;;AAenB,SAAO,IAAP;AACA,CAjB8C,EAkB/C,UAAER,KAAF;AAAA,SAAa,CAAEA,KAAK,CAACE,MAAR,EAAgBF,KAAK,CAACK,WAAN,CAAkBC,aAAlC,CAAb;AAAA,CAlB+C,CAAzC;AAqBP;;;;;;;;;;;AAUA,OAAO,SAASG,YAAT,CAAuBT,KAAvB,EAA8BC,KAA9B,EAAsC;AAC5C,MAAK,CAAED,KAAK,CAACK,WAAN,CAAkBK,cAAzB,EAA0C;AACzC,WAAO,KAAP;AACA;;AAED,MAAKZ,GAAG,CAAEE,KAAK,CAACK,WAAN,CAAkBC,aAApB,EAAmC,CAAEL,KAAF,CAAnC,CAAR,EAAyD;AACxD,WAAO,KAAP;AACA;;AAED,MAAMU,eAAe,GAAGZ,kBAAkB,CAAEC,KAAF,EAASC,KAAT,CAA1C;;AACA,MAAKU,eAAe,IAAIA,eAAe,CAACJ,YAAhB,KAAiCN,KAAzD,EAAiE;AAChE,WAAO,KAAP;AACA;;AAED,SAAO,IAAP;AACA;AAED;;;;;;;;AAOA,OAAO,SAASS,cAAT,CAAyBV,KAAzB,EAAiC;AACvC,SAAOA,KAAK,CAACK,WAAN,CAAkBK,cAAzB;AACA","sourcesContent":["/**\n * External dependencies\n */\nimport createSelector from 'rememo';\nimport { includes, difference, keys, has } from 'lodash';\n\n/**\n * An object containing information about a guide.\n *\n * @typedef {Object} NUXGuideInfo\n * @property {string[]} tipIds       Which tips the guide contains.\n * @property {?string}  currentTipId The guide's currently showing tip.\n * @property {?string}  nextTipId    The guide's next tip to show.\n */\n\n/**\n * Returns an object describing the guide, if any, that the given tip is a part\n * of.\n *\n * @param {Object} state Global application state.\n * @param {string} tipId The tip to query.\n *\n * @return {?NUXGuideInfo} Information about the associated guide.\n */\nexport const getAssociatedGuide = createSelector(\n\t( state, tipId ) => {\n\t\tfor ( const tipIds of state.guides ) {\n\t\t\tif ( includes( tipIds, tipId ) ) {\n\t\t\t\tconst nonDismissedTips = difference(\n\t\t\t\t\ttipIds,\n\t\t\t\t\tkeys( state.preferences.dismissedTips )\n\t\t\t\t);\n\t\t\t\tconst [\n\t\t\t\t\tcurrentTipId = null,\n\t\t\t\t\tnextTipId = null,\n\t\t\t\t] = nonDismissedTips;\n\t\t\t\treturn { tipIds, currentTipId, nextTipId };\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\t( state ) => [ state.guides, state.preferences.dismissedTips ]\n);\n\n/**\n * Determines whether or not the given tip is showing. Tips are hidden if they\n * are disabled, have been dismissed, or are not the current tip in any\n * guide that they have been added to.\n *\n * @param {Object} state Global application state.\n * @param {string} tipId The tip to query.\n *\n * @return {boolean} Whether or not the given tip is showing.\n */\nexport function isTipVisible( state, tipId ) {\n\tif ( ! state.preferences.areTipsEnabled ) {\n\t\treturn false;\n\t}\n\n\tif ( has( state.preferences.dismissedTips, [ tipId ] ) ) {\n\t\treturn false;\n\t}\n\n\tconst associatedGuide = getAssociatedGuide( state, tipId );\n\tif ( associatedGuide && associatedGuide.currentTipId !== tipId ) {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n\n/**\n * Returns whether or not tips are globally enabled.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether tips are globally enabled.\n */\nexport function areTipsEnabled( state ) {\n\treturn state.preferences.areTipsEnabled;\n}\n"]}